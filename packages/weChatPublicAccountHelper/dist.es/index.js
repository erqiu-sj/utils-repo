!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).weChatPublicAccountHelper={})}(this,(function(e){"use strict";function t(e,t,r,o){return new(r||(r=Promise))((function(s,a){function c(e){try{n(o.next(e))}catch(e){a(e)}}function i(e){try{n(o.throw(e))}catch(e){a(e)}}function n(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(c,i)}n((o=o.apply(e,t||[])).next())}))}class r{trigger(e){var r,o;return t(this,void 0,void 0,(function*(){if(void 0===(null===window||void 0===window?void 0:window.wx))return yield null===(r=e.getCallbacks("success"))||void 0===r?void 0:r(yield e.weChatDdkDoesNotInjectTriggerBehavior()),void(yield null===(o=e.getCallbacks("complete"))||void 0===o?void 0:o());yield e.weChatSdkJnjectionTriggerBehavior()}))}}class o extends class{constructor(){this.callbackMapper={}}collector(e,t){return t?(Reflect.set(this.callbackMapper,e,t),this):this}getCallbacks(e){return Reflect.get(this.callbackMapper,e)}getAllCallbacks(){return this.callbackMapper}}{constructor(){super(...arguments),this.call=""}readConfiguration(e){return this.configure=e,this}callName(e){this.call=e}getConfiguration(){return this.configure}fail(e){return this.collector("fail",e),this}success(e){return this.collector("success",e),this}complete(e){return this.collector("complete",e),this}cancel(e){return this.collector("cancel",e),this}trigger(e){return this.collector("trigger",e),this}done(){return t(this,void 0,void 0,(function*(){yield(new r).trigger(this)}))}weChatDdkDoesNotInjectTriggerBehavior(){return t(this,void 0,void 0,(function*(){}))}weChatSdkJnjectionTriggerBehavior(){return t(this,void 0,void 0,(function*(){const e=Object.assign(Object.assign({},this.getAllCallbacks()),this.getConfiguration());Reflect.get(window.wx,this.call)(e)}))}}let s={};e.BasicConfiguration=class{constructor(e){s=e}getConfig(){return s}},e.ChooseImage=class extends o{constructor(){super(),this.callName("chooseImage")}weChatDdkDoesNotInjectTriggerBehavior(){return t(this,void 0,void 0,(function*(){return{localIds:[]}}))}},e.DownloadImage=class extends o{constructor(){super(),this.callName("downloadImage")}weChatDdkDoesNotInjectTriggerBehavior(){return t(this,void 0,void 0,(function*(){return{localId:1}}))}},e.GetLocalImgData=class extends o{constructor(){super(),this.callName("getLocalImgData")}weChatDdkDoesNotInjectTriggerBehavior(){return t(this,void 0,void 0,(function*(){return{localData:(null==s?void 0:s.baseSrc)||""}}))}},e.OnSearchBeacons=class extends o{constructor(){super(),this.callName("onSearchBeacons")}},e.PreviewImage=class extends o{constructor(){super(),this.callName("previewImage")}},e.StartSearchBeacons=class extends o{constructor(){super(),this.callName("startSearchBeacons")}},e.StopSearchBeacons=class extends o{constructor(){super(),this.callName("stopSearchBeacons")}},e.UpdateAppMessageShareData=class extends o{constructor(){super(),this.callName("updateAppMessageShareData")}},e.UpdateTimelineShareDataConfig=class extends o{constructor(){super(),this.callName("updateTimelineShareData")}},e.UploadImage=class extends o{constructor(){super(),this.callName("uploadImage")}weChatDdkDoesNotInjectTriggerBehavior(){return t(this,void 0,void 0,(function*(){return{serverId:1}}))}},Object.defineProperty(e,"__esModule",{value:!0})}));
