"use strict";function e(e,t,r,s){return new(r||(r=Promise))((function(o,i){function a(e){try{n(s.next(e))}catch(e){i(e)}}function c(e){try{n(s.throw(e))}catch(e){i(e)}}function n(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}n((s=s.apply(e,t||[])).next())}))}Object.defineProperty(exports,"__esModule",{value:!0});class t{trigger(t){return e(this,void 0,void 0,(function*(){void 0!==(null===window||void 0===window?void 0:window.wx)?yield t.weChatSdkJnjectionTriggerBehavior():yield t.getCallbacks("success")(yield t.weChatDdkDoesNotInjectTriggerBehavior())}))}}class r extends class{constructor(){this.callbackMapper={}}collector(e,t){return t?(Reflect.set(this.callbackMapper,e,t),this):this}getCallbacks(e){return Reflect.get(this.callbackMapper,e)}getAllCallbacks(){return this.callbackMapper}}{constructor(){super(...arguments),this.call=""}readConfiguration(e){return this.configure=e,this}callName(e){this.call=e}getConfiguration(){return this.configure}fail(e){return this.collector("fail",e),this}success(e){return this.collector("success",e),this}complete(e){return this.collector("complete",e),this}cancel(e){return this.collector("cancel",e),this}trigger(e){return this.collector("trigger",e),this}done(){return e(this,void 0,void 0,(function*(){yield(new t).trigger(this)}))}weChatDdkDoesNotInjectTriggerBehavior(){return e(this,void 0,void 0,(function*(){}))}weChatSdkJnjectionTriggerBehavior(){return e(this,void 0,void 0,(function*(){const e=Object.assign(Object.assign({},this.getAllCallbacks()),this.getConfiguration());Reflect.get(window.wx,this.call)(e)}))}}let s={};exports.BasicConfiguration=class{constructor(e){s=e}getConfig(){return s}},exports.ChooseImage=class extends r{constructor(){super(),this.callName("chooseImage")}},exports.DownloadImage=class extends r{constructor(){super(),this.callName("downloadImage")}weChatDdkDoesNotInjectTriggerBehavior(){return e(this,void 0,void 0,(function*(){return{localId:1}}))}},exports.GetLocalImgData=class extends r{constructor(){super(),this.callName("getLocalImgData")}weChatDdkDoesNotInjectTriggerBehavior(){return e(this,void 0,void 0,(function*(){return{localData:(null==s?void 0:s.baseSrc)||""}}))}},exports.PreviewImage=class extends r{constructor(){super(),this.callName("previewImage")}},exports.UpdateAppMessageShareData=class extends r{constructor(){super(),this.callName("updateAppMessageShareData")}},exports.UpdateTimelineShareDataConfig=class extends r{constructor(){super(),this.callName("updateTimelineShareData")}};
